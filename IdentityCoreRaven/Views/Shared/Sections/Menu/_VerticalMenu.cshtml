@using Infrastructure

@inject SignInManager<CustomUser> SignInManager

@{
    TempData.Keep();
    string? currentPage = ViewContext.HttpContext.Request.Path;
}

<aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
    
    <div class='app-brand demo @((@ViewData["navbarFull"] != null && Convert.ToBoolean(@ViewData["navbarFull"])) ? "d-xl-none" : "")'>
        <a asp-controller="Home" asp-action="Index" class="app-brand-link">
            <!--INSERT COMPANY LOGO HERE -->
        </a>

        <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
            <i class="bx bx-chevron-left bx-sm align-middle"></i>
        </a>
    </div>
    
    @if (SignInManager.IsSignedIn(User))
    {
        <ul class="menu-inner py-1">
            <!-- Users -->
            <li class='menu-item@(currentPage.EndsWith("/") || currentPage.StartsWith("/User/") ? " active open" : "")'>
                <a href="javascript:void(0);" class="menu-link menu-toggle">
                    <i class="menu-icon tf-icons bx bx-user-circle"></i>
                    <div>Management</div>
                </a>
                <ul class="menu-sub">
                    <li class='menu-item@(currentPage == "/User/Index" ? " active" : "")'>
                        <a asp-controller="User" asp-action="Index" class="menu-link">
                            <div>Users</div>
                        </a>
                    </li>
                    <li class='menu-item@(currentPage == "/Role/Index" ? " active" : "")'>
                        <a asp-controller="Role" asp-action="Index" class="menu-link">
                            <div>Roles</div>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    }
    else
    {

    }
    
</aside>
